# -*- coding: utf-8 -*-
import scrapy
from scrapy.linkextractors import LinkExtractor
from ..items import YaozhItem
import random
import time

class YaozhspiderSpider(scrapy.Spider):
    name = 'yaozhSpider'
    # allowed_domains = ['db.yaozh.com/baojian']
    # start_urls = ['http://db.yaozh.com/baojian/']

    headers = {
        #'Cookie': 'acw_tc=2f624a2215876457596981198e759b0928fb4eb56516768430e3e3a4827fb3; think_language=zh-CN; PHPSESSID=26fqn7fdufer42bjof6j4p77b3; _pk_ses.1.c32b=1; Hm_lvt_65968db3ac154c3089d7f9a4cbb98c94=1587645752; _ga=GA1.2.131916460.1587645752; _gid=GA1.2.75283628.1587645752; kztoken=nJail6zJp6iXaJqWl3FpZmVuaZeS; his=a%3A2%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVtaJib%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVuaZeS%22%3B%7D; _pk_id.1.c32b=d9bed219e4fc474a.1587645752.1.1587646832.1587645752.; Hm_lpvt_65968db3ac154c3089d7f9a4cbb98c94=1587646833',
        # 'Cookie': 'kztoken=nJail6zJp6iXaJqWl3FpZ2Joapua; his=a%3A10%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5Wb%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aS%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aT%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aU%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aV%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aW%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aX%22%3Bi%3A7%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aY%22%3Bi%3A8%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5ea%22%3Bi%3A9%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2Joapua%22%3B%7D; acw_tc=2f624a2215876457596981198e759b0928fb4eb56516768430e3e3a4827fb3; _ga=GA1.2.131916460.1587645752; _gid=GA1.2.75283628.1587645752; kztoken=nJail6zJp6iXaJqWl3FpZmptaJmW; his=a%3A7%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVtaJib%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVuaZeS%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVvaJeY%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmZpZpmb%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmZpZpyV%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmZpZpyZ%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmptaJmW%22%3B%7D; think_language=zh-CN; PHPSESSID=3scen2pim9bg1u02q9uh9kkjn2; _pk_ref.1.c32b=%5B%22%22%2C%22%22%2C1587710608%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%3Fp%3D1%26pageSize%3D20%22%5D; _pk_ses.1.c32b=1; yaozh_logintime=1587710961; yaozh_user=914409%09%E6%9D%91%E5%8F%A3%E5%BC%A0%E5%B8%88%E5%82%85; yaozh_userId=914409; yaozh_uidhas=1; yaozh_mylogin=1587710962; _gat=1; Hm_lpvt_65968db3ac154c3089d7f9a4cbb98c94=1587710953; acw_tc=2f624a3815876883368618256e5f774115b8f937568013e961f75ada617de1; Hm_lvt_65968db3ac154c3089d7f9a4cbb98c94=1587645752%2C1587710608; _pk_ref_6_c32b=%5B%22%22%2C%22%22%2C1587710875%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%2F32772.html%22%5D; _pk_ses_6_c32b=1; _pk_id_6_c32b=e52ee03ed33c4eb1.1587710875.1.1587710953.1587710875.; _pk_id.1.c32b=d9bed219e4fc474a.1587645752.5.1587710980.1587710608.; _ga=GA1.3.751573346.1587710980; _gid=GA1.3.880494740.1587710980; _gat=1',
        'Cookie': 'kztoken=nJail6zJp6iXaJqWl3FpZ2JpYZOb; his=a%3A10%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aS%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aT%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aU%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aV%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aW%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aX%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aY%22%3Bi%3A7%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5ea%22%3Bi%3A8%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2Joapua%22%3Bi%3A9%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JpYZOb%22%3B%7D; acw_tc=2f624a2215876457596981198e759b0928fb4eb56516768430e3e3a4827fb3; _ga=GA1.2.131916460.1587645752; _gid=GA1.2.75283628.1587645752; think_language=zh-CN; PHPSESSID=3scen2pim9bg1u02q9uh9kkjn2; yaozh_logintime=1587710961; yaozh_user=914409%09%E6%9D%91%E5%8F%A3%E5%BC%A0%E5%B8%88%E5%82%85; yaozh_userId=914409; yaozh_uidhas=1; yaozh_mylogin=1587710962; _gat=1; Hm_lpvt_65968db3ac154c3089d7f9a4cbb98c94=1587710953; acw_tc=2f624a3815876883368618256e5f774115b8f937568013e961f75ada617de1; Hm_lvt_65968db3ac154c3089d7f9a4cbb98c94=1587645752%2C1587710608; _pk_ref_6_c32b=%5B%22%22%2C%22%22%2C1587710875%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%2F32772.html%22%5D; _pk_ses_6_c32b=1; _pk_id_6_c32b=e52ee03ed33c4eb1.1587710875.1.1587710953.1587710875.; _ga=GA1.3.751573346.1587710980; _gid=GA1.3.880494740.1587710980; kztoken=nJail6zJp6iXaJqWl3FpZ2JrZ5uS; his=a%3A10%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aT%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aU%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aV%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aW%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aX%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aY%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5ea%22%3Bi%3A7%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2Joapua%22%3Bi%3A8%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JpYZOb%22%3Bi%3A9%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JrZ5uS%22%3B%7D; _pk_ref.1.c32b=%5B%22%22%2C%22%22%2C1587713672%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%3Fp%3D1%26pageSize%3D20%22%5D; _pk_id.1.c32b=d9bed219e4fc474a.1587645752.6.1587713672.1587713672.; _pk_ses.1.c32b=1; _gat=1',
        'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36',
    }

    def start_requests(self):
        yield scrapy.Request('http://db.yaozh.com/baojian/',
                             callback=self.parse,
                             headers=self.headers,
                             dont_filter=True)

    def parse(self, response):
        headers = {
            # 'Cookie': 'acw_tc=2f624a2215876457596981198e759b0928fb4eb56516768430e3e3a4827fb3; think_language=zh-CN; PHPSESSID=26fqn7fdufer42bjof6j4p77b3; _pk_ses.1.c32b=1; Hm_lvt_65968db3ac154c3089d7f9a4cbb98c94=1587645752; _ga=GA1.2.131916460.1587645752; _gid=GA1.2.75283628.1587645752; kztoken=nJail6zJp6iXaJqWl3FpZmVuaZeS; his=a%3A2%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVtaJib%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVuaZeS%22%3B%7D; _pk_id.1.c32b=d9bed219e4fc474a.1587645752.1.1587646832.1587645752.; Hm_lpvt_65968db3ac154c3089d7f9a4cbb98c94=1587646833',
            'Cookie': 'kztoken=nJail6zJp6iXaJqWl3FpZ2Joapua; his=a%3A10%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5Wb%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aS%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aT%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aU%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aV%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aW%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aX%22%3Bi%3A7%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aY%22%3Bi%3A8%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5ea%22%3Bi%3A9%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2Joapua%22%3B%7D; acw_tc=2f624a2215876457596981198e759b0928fb4eb56516768430e3e3a4827fb3; _ga=GA1.2.131916460.1587645752; _gid=GA1.2.75283628.1587645752; kztoken=nJail6zJp6iXaJqWl3FpZmptaJmW; his=a%3A7%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVtaJib%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVuaZeS%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVvaJeY%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmZpZpmb%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmZpZpyV%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmZpZpyZ%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmptaJmW%22%3B%7D; think_language=zh-CN; PHPSESSID=3scen2pim9bg1u02q9uh9kkjn2; _pk_ref.1.c32b=%5B%22%22%2C%22%22%2C1587710608%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%3Fp%3D1%26pageSize%3D20%22%5D; _pk_ses.1.c32b=1; yaozh_logintime=1587710961; yaozh_user=914409%09%E6%9D%91%E5%8F%A3%E5%BC%A0%E5%B8%88%E5%82%85; yaozh_userId=914409; yaozh_uidhas=1; yaozh_mylogin=1587710962; _gat=1; Hm_lpvt_65968db3ac154c3089d7f9a4cbb98c94=1587710953; acw_tc=2f624a3815876883368618256e5f774115b8f937568013e961f75ada617de1; Hm_lvt_65968db3ac154c3089d7f9a4cbb98c94=1587645752%2C1587710608; _pk_ref_6_c32b=%5B%22%22%2C%22%22%2C1587710875%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%2F32772.html%22%5D; _pk_ses_6_c32b=1; _pk_id_6_c32b=e52ee03ed33c4eb1.1587710875.1.1587710953.1587710875.; _pk_id.1.c32b=d9bed219e4fc474a.1587645752.5.1587710980.1587710608.; _ga=GA1.3.751573346.1587710980; _gid=GA1.3.880494740.1587710980; _gat=1',
            'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36',
        }
        #提取每条记录中的详情链接
        le = LinkExtractor(restrict_css='table.table')
        links = le.extract_links(response)
        # print('links_list_url:',links)
        for link in links:  # le.extract_links(response):
            yield scrapy.Request(link.url, callback=self.parse_info ,headers=headers)

        headers = {
            # 'Cookie': 'acw_tc=2f624a2215876457596981198e759b0928fb4eb56516768430e3e3a4827fb3; think_language=zh-CN; PHPSESSID=26fqn7fdufer42bjof6j4p77b3; _pk_ses.1.c32b=1; Hm_lvt_65968db3ac154c3089d7f9a4cbb98c94=1587645752; _ga=GA1.2.131916460.1587645752; _gid=GA1.2.75283628.1587645752; kztoken=nJail6zJp6iXaJqWl3FpZmVuaZeS; his=a%3A2%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVtaJib%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVuaZeS%22%3B%7D; _pk_id.1.c32b=d9bed219e4fc474a.1587645752.1.1587646832.1587645752.; Hm_lpvt_65968db3ac154c3089d7f9a4cbb98c94=1587646833',
            # 'Cookie': 'kztoken=nJail6zJp6iXaJqWl3FpZ2Joapua; his=a%3A10%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5Wb%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aS%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aT%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aU%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aV%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aW%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aX%22%3Bi%3A7%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aY%22%3Bi%3A8%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5ea%22%3Bi%3A9%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2Joapua%22%3B%7D; acw_tc=2f624a2215876457596981198e759b0928fb4eb56516768430e3e3a4827fb3; _ga=GA1.2.131916460.1587645752; _gid=GA1.2.75283628.1587645752; kztoken=nJail6zJp6iXaJqWl3FpZmptaJmW; his=a%3A7%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVtaJib%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVuaZeS%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmVvaJeY%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmZpZpmb%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmZpZpyV%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmZpZpyZ%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZmptaJmW%22%3B%7D; think_language=zh-CN; PHPSESSID=3scen2pim9bg1u02q9uh9kkjn2; _pk_ref.1.c32b=%5B%22%22%2C%22%22%2C1587710608%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%3Fp%3D1%26pageSize%3D20%22%5D; _pk_ses.1.c32b=1; yaozh_logintime=1587710961; yaozh_user=914409%09%E6%9D%91%E5%8F%A3%E5%BC%A0%E5%B8%88%E5%82%85; yaozh_userId=914409; yaozh_uidhas=1; yaozh_mylogin=1587710962; _gat=1; Hm_lpvt_65968db3ac154c3089d7f9a4cbb98c94=1587710953; acw_tc=2f624a3815876883368618256e5f774115b8f937568013e961f75ada617de1; Hm_lvt_65968db3ac154c3089d7f9a4cbb98c94=1587645752%2C1587710608; _pk_ref_6_c32b=%5B%22%22%2C%22%22%2C1587710875%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%2F32772.html%22%5D; _pk_ses_6_c32b=1; _pk_id_6_c32b=e52ee03ed33c4eb1.1587710875.1.1587710953.1587710875.; _pk_id.1.c32b=d9bed219e4fc474a.1587645752.5.1587710980.1587710608.; _ga=GA1.3.751573346.1587710980; _gid=GA1.3.880494740.1587710980; _gat=1',
            'Cookie': 'kztoken=nJail6zJp6iXaJqWl3FpZ2JpYZOb; his=a%3A10%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aS%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aT%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aU%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aV%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aW%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aX%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aY%22%3Bi%3A7%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5ea%22%3Bi%3A8%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2Joapua%22%3Bi%3A9%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JpYZOb%22%3B%7D; acw_tc=2f624a2215876457596981198e759b0928fb4eb56516768430e3e3a4827fb3; _ga=GA1.2.131916460.1587645752; _gid=GA1.2.75283628.1587645752; think_language=zh-CN; PHPSESSID=3scen2pim9bg1u02q9uh9kkjn2; yaozh_logintime=1587710961; yaozh_user=914409%09%E6%9D%91%E5%8F%A3%E5%BC%A0%E5%B8%88%E5%82%85; yaozh_userId=914409; yaozh_uidhas=1; yaozh_mylogin=1587710962; _gat=1; Hm_lpvt_65968db3ac154c3089d7f9a4cbb98c94=1587710953; acw_tc=2f624a3815876883368618256e5f774115b8f937568013e961f75ada617de1; Hm_lvt_65968db3ac154c3089d7f9a4cbb98c94=1587645752%2C1587710608; _pk_ref_6_c32b=%5B%22%22%2C%22%22%2C1587710875%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%2F32772.html%22%5D; _pk_ses_6_c32b=1; _pk_id_6_c32b=e52ee03ed33c4eb1.1587710875.1.1587710953.1587710875.; _ga=GA1.3.751573346.1587710980; _gid=GA1.3.880494740.1587710980; kztoken=nJail6zJp6iXaJqWl3FpZ2JrZ5uS; his=a%3A10%3A%7Bi%3A0%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aT%22%3Bi%3A1%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aU%22%3Bi%3A2%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aV%22%3Bi%3A3%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aW%22%3Bi%3A4%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aX%22%3Bi%3A5%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5aY%22%3Bi%3A6%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JoZ5ea%22%3Bi%3A7%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2Joapua%22%3Bi%3A8%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JpYZOb%22%3Bi%3A9%3Bs%3A28%3A%22nJail6zJp6iXaJqWl3FpZ2JrZ5uS%22%3B%7D; _pk_ref.1.c32b=%5B%22%22%2C%22%22%2C1587713672%2C%22https%3A%2F%2Fdb.yaozh.com%2Fbaojian%3Fp%3D1%26pageSize%3D20%22%5D; _pk_id.1.c32b=d9bed219e4fc474a.1587645752.6.1587713672.1587713672.; _pk_ses.1.c32b=1; _gat=1',
            'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36',
        }
        #提取下一页链接
        pages = 845
        for i in range(1,4):
            next_url = ('https://db.yaozh.com/baojian?p={0}&pageSize=20'.format(i))
            time.sleep(random.randint(1,5))
            yield scrapy.Request(next_url,callback=self.parse,headers=headers)

    def parse_info(self, response):
        # 解析详情信息
        pass
        # yaozhinfo = YaozhItem()
        # sel = response.css('table.table span::text').extract()
        # yaozhinfo['productName'] = sel[0]
        # yaozhinfo['chineseNameOfApplicant'] = sel[1]
        # yaozhinfo['addressOfApplicant'] = sel[2]
        # yaozhinfo['healthCareFunction'] = sel[3]
        # yaozhinfo['contentOfFunctionalIngredients'] = sel[4]
        # yaozhinfo['mainRawMaterials'] = sel[5]
        # yaozhinfo['suitablePopulation'] = sel[6]
        # yaozhinfo['unsuitablePeople'] = sel[7]
        # yaozhinfo['consumptionMethodAndQuantity'] = sel[8]
        # yaozhinfo['productSpecifications'] = sel[9]
        # yaozhinfo['qualityGuaranteePeriod'] = sel[10]
        # yaozhinfo['storageMethod'] = sel[11]
        # yaozhinfo['mattersNeedingAttention'] = sel[12]
        # yaozhinfo['approvalDate'] = sel[13]
        # yaozhinfo['productNumber'] = sel[14]
        # yaozhinfo['approvalNo'] = sel[15]
        # yaozhinfo['validUntil'] = sel[16]
        # yield yaozhinfo